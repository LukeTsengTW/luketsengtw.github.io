<!DOCTYPE html><html lang="zh-TW" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover"><title>【Lua 筆記】字串（String） - part 8 | Yaoの程式小窩</title><meta name="author" content="LukeTseng"><meta name="copyright" content="LukeTseng"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="【Lua 筆記】字串（String） - part 8由於有款遊戲叫做 CSO（Counter-Strike Online），內建模式創世者模式（Studio）新增使用 Lua 及其遊戲的 API，所以突發奇想製作這個筆記。 這個筆記會在一開始先著重純粹的程式設計自學，在最後的章節才會與 CSO 遊戲 API 進行應用。 ※本文篇幅較長，十分複雜，請小心閱讀，請務必收藏！！※ 字串（String）"><meta property="og:type" content="article"><meta property="og:title" content="【Lua 筆記】字串（String） - part 8"><meta property="og:url" content="https://luketsengtw.github.io/posts/ca9a09b"><meta property="og:site_name" content="Yaoの程式小窩"><meta property="og:description" content="【Lua 筆記】字串（String） - part 8由於有款遊戲叫做 CSO（Counter-Strike Online），內建模式創世者模式（Studio）新增使用 Lua 及其遊戲的 API，所以突發奇想製作這個筆記。 這個筆記會在一開始先著重純粹的程式設計自學，在最後的章節才會與 CSO 遊戲 API 進行應用。 ※本文篇幅較長，十分複雜，請小心閱讀，請務必收藏！！※ 字串（String）"><meta property="og:locale" content="zh_TW"><meta property="og:image" content="https://luketsengtw.github.io/img/lua_cover.png"><meta property="article:published_time" content="2024-06-24T11:15:48.000Z"><meta property="article:modified_time" content="2025-08-07T15:41:54.689Z"><meta property="article:author" content="LukeTseng"><meta property="article:tag" content="程式語言"><meta property="article:tag" content="Lua"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://luketsengtw.github.io/img/lua_cover.png"><script type="application/ld+json">{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "【Lua 筆記】字串（String） - part 8",
  "url": "https://luketsengtw.github.io/posts/ca9a09b",
  "image": "https://luketsengtw.github.io/img/lua_cover.png",
  "datePublished": "2024-06-24T11:15:48.000Z",
  "dateModified": "2025-08-07T15:41:54.689Z",
  "author": [
    {
      "@type": "Person",
      "name": "LukeTseng",
      "url": "https://luketsengtw.github.io"
    }
  ]
}</script><link rel="shortcut icon" href="/img/website_favicon.ico"><link rel="canonical" href="https://luketsengtw.github.io/posts/ca9a09b"><link rel="preconnect" href="//cdn.jsdelivr.net"><link rel="preconnect" href="//www.google-analytics.com" crossorigin=""><link rel="preconnect" href="//busuanzi.ibruce.info"><meta name="google-site-verification" content="S50ZW5JR-4iAagicR6omYnAz8LUv5ZcouskPpuBaFBs"><link rel="manifest" href="/img/pwa/manifest.json"><link rel="apple-touch-icon" sizes="180x180" href="/img/pwa/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/img/pwa/32.png"><link rel="icon" type="image/png" sizes="16x16" href="/img/pwa/16.png"><link rel="mask-icon" href="/img/pwa/safari-pinned-tab.svg" color="#5bbad5"><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.css" media="print" onload='this.media="all"'><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox/fancybox.min.css" media="print" onload='this.media="all"'><script>(()=>{const e={set:(e,t,o)=>{if(!o)return;const a=Date.now()+864e5*o;localStorage.setItem(e,JSON.stringify({value:t,expiry:a}))},get:e=>{const t=localStorage.getItem(e);if(!t)return;const{value:o,expiry:a}=JSON.parse(t);if(!(Date.now()>a))return o;localStorage.removeItem(e)}};window.btf={saveToLocal:e,getScript:(e,t={})=>new Promise((o,a)=>{const n=document.createElement("script");n.src=e,n.async=!0,Object.entries(t).forEach(([e,t])=>n.setAttribute(e,t)),n.onload=n.onreadystatechange=()=>{n.readyState&&!/loaded|complete/.test(n.readyState)||o()},n.onerror=a,document.head.appendChild(n)}),getCSS:(e,t)=>new Promise((o,a)=>{const n=document.createElement("link");n.rel="stylesheet",n.href=e,t&&(n.id=t),n.onload=n.onreadystatechange=()=>{n.readyState&&!/loaded|complete/.test(n.readyState)||o()},n.onerror=a,document.head.appendChild(n)}),addGlobalFn:(e,t,o=!1,a=window)=>{if(e.startsWith("pjax"))return;const n=a.globalFn||{};n[e]=n[e]||{},n[e][o||Object.keys(n[e]).length]=t,a.globalFn=n}};const t=()=>{document.documentElement.setAttribute("data-theme","dark"),null!==document.querySelector('meta[name="theme-color"]')&&document.querySelector('meta[name="theme-color"]').setAttribute("content","#0d0d0d")},o=()=>{document.documentElement.setAttribute("data-theme","light"),null!==document.querySelector('meta[name="theme-color"]')&&document.querySelector('meta[name="theme-color"]').setAttribute("content","#ffffff")};btf.activateDarkMode=t,btf.activateLightMode=o;const a=e.get("theme");"dark"===a?t():"light"===a&&o();const n=e.get("aside-status");void 0!==n&&document.documentElement.classList.toggle("hide-aside","hide"===n);/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)&&document.documentElement.classList.add("apple")})()</script><script async src="https://www.googletagmanager.com/gtag/js?id=G-7EES35MTFS"></script><script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-7EES35MTFS"),btf.addGlobalFn("pjaxComplete",()=>{gtag("config","G-7EES35MTFS",{page_path:window.location.pathname})},"google_analytics")</script><script>!function(e,t,a,n,o){e[n]=e[n]||[],e[n].push({"gtm.start":(new Date).getTime(),event:"gtm.js"});var g=t.getElementsByTagName(a)[0],m=t.createElement(a);m.async=!0,m.src="https://www.googletagmanager.com/gtm.js?id=GTM-5BKRW8SL",g.parentNode.insertBefore(m,g)}(window,document,"script","dataLayer"),btf.addGlobalFn("pjaxComplete",()=>{dataLayer.push({event:"pjaxComplete",page_title:document.title,page_location:location.href,page_path:window.location.pathname})},"google_tag_manager")</script><script>const GLOBAL_CONFIG={root:"/",algolia:{appId:"EF32H7JNEE",apiKey:"876fdde0317458bcae93bc0ded1d7176",indexName:"hexo",hitsPerPage:10,languages:{input_placeholder:"想找些什麼呢...?",hits_empty:"找不到符合您查詢的內容：${query}",hits_stats:"找到 ${hits} 筆結果，耗時 ${time} 毫秒"}},localSearch:void 0,translate:{defaultEncoding:1,translateDelay:0,msgToTraditionalChinese:"繁",msgToSimplifiedChinese:"簡"},highlight:{plugin:"highlight.js",highlightCopy:!0,highlightLang:!0,highlightHeightLimit:!1,highlightFullpage:!0,highlightMacStyle:!0},copy:{success:"複製成功",error:"複製失敗",noSupport:"瀏覽器不支援"},relativeDate:{homepage:!1,post:!1},runtime:"",dateSuffix:{just:"剛剛",min:"分鐘前",hour:"小時前",day:"天前",month:"個月前"},copyright:void 0,lightbox:"fancybox",Snackbar:{chs_to_cht:"已切換為繁體中文",cht_to_chs:"已切換為簡體中文",day_to_night:"已切換為深色模式",night_to_day:"已切換為淺色模式",bgLight:"#49b1f5",bgDark:"#1f1f1f",position:"bottom-left"},infinitegrid:{js:"https://cdn.jsdelivr.net/npm/@egjs/infinitegrid/dist/infinitegrid.min.js",buttonText:"載入更多"},isPhotoFigcaption:!1,islazyloadPlugin:!1,isAnchor:!1,percent:{toc:!0,rightside:!0},autoDarkmode:!1}</script><script id="config-diff">var GLOBAL_CONFIG_SITE={title:"【Lua 筆記】字串（String） - part 8",isHighlightShrink:!1,isToc:!0,pageType:"post"}</script><meta name="generator" content="Hexo 7.3.0"><link rel="alternate" href="/atom.xml" title="Yaoの程式小窩" type="application/atom+xml">
</head><body><div id="loading-box"><div class="loading-left-bg"></div><div class="loading-right-bg"></div><div class="spinner-box"><div class="configure-border-1"><div class="configure-core"></div></div><div class="configure-border-2"><div class="configure-core"></div></div><div class="loading-word">載入中...</div></div></div><script>(()=>{const e=document.getElementById("loading-box"),d=document.body,t=()=>{e.classList.contains("loaded")||(d.style.overflow="",e.classList.add("loaded"))},o=()=>{d.style.overflow="hidden",e.classList.remove("loaded")};o(),"complete"===document.readyState?t():(window.addEventListener("load",t),document.addEventListener("DOMContentLoaded",t),setTimeout(t,7e3))})()</script><div id="web_bg" style="background-image:url(/img/web_background_smaller.jpg)"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img text-center"><img src="/img/avatar.jpg" onerror='this.onerror=null,this.src="/img/friend_404.gif"' alt="avatar"></div><div class="site-data text-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">147</div></a><a href="/tags/"><div class="headline">標籤</div><div class="length-num">48</div></a><a href="/categories/"><div class="headline">分類</div><div class="length-num">19</div></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> About</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image:url(/img/lua_cover.png)"><nav id="nav"><span id="blog-info"><a class="nav-site-title" href="/"><img class="site-icon" src="/img/icon.png" alt="Logo"><span class="site-name">Yaoの程式小窩</span></a><a class="nav-page-title" href="/"><span class="site-name">【Lua 筆記】字串（String） - part 8</span><span class="site-name"><i class="fa-solid fa-circle-arrow-left"></i><span> 返回首頁</span></span></a></span><div id="menus"><div id="search-button"><span class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> 搜尋</span></span></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> About</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></div></div><div id="toggle-menu"><span class="site-page"><i class="fas fa-bars fa-fw"></i></span></div></div></nav><div id="post-info"><h1 class="post-title">【Lua 筆記】字串（String） - part 8</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">發表於</span><time class="post-meta-date-created" datetime="2024-06-24T11:15:48.000Z" title="發表於 2024-06-24 19:15:48">2024-06-24</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新於</span><time class="post-meta-date-updated" datetime="2025-08-07T15:41:54.689Z" title="更新於 2025-08-07 23:41:54">2025-08-07</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/programming/">程式設計</a><i class="fas fa-angle-right post-meta-separator"></i><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/programming/lua/">Lua</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">總字數:</span><span class="word-count">7k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">閱讀時間:</span><span>25分鐘</span></span><span class="post-meta-separator">|</span><span data-flag-title=""><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">瀏覽量:</span><span class="waline-pageview-count" data-path="/posts/ca9a09b"><i class="fa-solid fa-spinner fa-spin"></i></span></span><span class="post-meta-separator">|</span><span class="post-meta-commentcount"><i class="far fa-comments fa-fw post-meta-icon"></i><span class="post-meta-label">評論數:</span><a href="/posts/ca9a09b#post-comment"><span class="waline-comment-count" data-path="/posts/ca9a09b"><i class="fa-solid fa-spinner fa-spin"></i></span></a></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="container post-content" id="article-container"><h1 id="【Lua-筆記】字串（String）-part-8"><a href="#【Lua-筆記】字串（String）-part-8" class="headerlink" title="【Lua 筆記】字串（String） - part 8"></a>【Lua 筆記】字串（String） - part 8</h1><p>由於有款遊戲叫做 CSO（Counter-Strike Online），內建模式創世者模式（Studio）新增使用 Lua 及其遊戲的 API，所以突發奇想製作這個筆記。</p><p>這個筆記會在一開始先著重純粹的程式設計自學，在最後的章節才會與 CSO 遊戲 API 進行應用。</p><p>※本文篇幅較長，十分複雜，請小心閱讀，請務必收藏！！※</p><h1 id="字串（String）"><a href="#字串（String）" class="headerlink" title="字串（String）"></a>字串（String）</h1><p>字串（String）是由許多字元（Character）所組成的。</p><p>字元（Character）：中文字、英文字母（a-z）、底線等等任何符號皆是一種字元。</p><p>字串可以用以下三種方式表示：</p><ul><li>成對單引號括起來（’String’）</li><li>成對雙引號括起來（”String”）</li><li>[[ ]] 裡面放字串 -&gt; 多行字串</li></ul><p>第三種方式舉例：</p><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">a = <span class="string">[[</span></span><br><span class="line"><span class="string">Hi, this is a string</span></span><br><span class="line"><span class="string">aaaaaaaa</span></span><br><span class="line"><span class="string">]]</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(a)</span><br></pre></td></tr></table></figure><p>輸出結果：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Hi, this is a string</span><br><span class="line">aaaaaaaa</span><br></pre></td></tr></table></figure><h2 id="取得字串長度的另一種方式"><a href="#取得字串長度的另一種方式" class="headerlink" title="取得字串長度的另一種方式"></a>取得字串長度的另一種方式</h2><p><code>string.len(裡面放字串)</code>，實際上這個方式與用 <code>#</code> 這個運算子的方式並沒有什麼區別，但 <code>string.len()</code> 的可讀性會比用 <code>#</code> 更高。</p><p>以下是用兩種方式的比較：</p><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">a = <span class="string">[[</span></span><br><span class="line"><span class="string">Hi, this is a string</span></span><br><span class="line"><span class="string">aaaaaaaa</span></span><br><span class="line"><span class="string">]]</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">string</span>.<span class="built_in">len</span>(a)) <span class="comment">--&gt; 30</span></span><br></pre></td></tr></table></figure><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">a = <span class="string">[[</span></span><br><span class="line"><span class="string">Hi, this is a string</span></span><br><span class="line"><span class="string">aaaaaaaa</span></span><br><span class="line"><span class="string">]]</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(#a) <span class="comment">--&gt; 30</span></span><br></pre></td></tr></table></figure><p>也可以用 utf8.len 函数：</p><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">local</span> myString = <span class="string">&quot;Hello, 世界!&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- utf8.len()</span></span><br><span class="line"><span class="keyword">local</span> length1 = utf8.<span class="built_in">len</span>(myString)</span><br><span class="line"><span class="built_in">print</span>(length1) <span class="comment">-- 输出 10</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- string.len()</span></span><br><span class="line"><span class="keyword">local</span> length2 = <span class="built_in">string</span>.<span class="built_in">len</span>(myString)</span><br><span class="line"><span class="built_in">print</span>(length2) <span class="comment">-- 输出 14</span></span><br></pre></td></tr></table></figure><p>註：utf8 是一種編碼，主要針對 Unicode 進行編碼，詳細具體內容筆者推薦看這篇文章：<a target="_blank" rel="noopener external nofollow noreferrer" href="https://openhome.cc/Gossip/Encoding/UTF8.html">UTF-8</a></p><p>可以看出當我們字串是中文字時，使用 string.len()（註：使用 <code>#</code> 的效果同屬於 string.len()）便會使字串長度輸出不準確，這是因為中文字編碼的關係。</p><p>string.len() 跟 # 回傳的會是 ASCII 編碼字串的長度，而 utf8.len() 包含中文字與英文。</p><p>所以歸結出一個結論：</p><ul><li>一般英文字母（ASCII）用 string.len() 或 #</li><li>中文字與英文字母混合用 utf8.len()</li></ul><h2 id="跳脫字元（Escape-Character）"><a href="#跳脫字元（Escape-Character）" class="headerlink" title="跳脫字元（Escape Character）"></a>跳脫字元（Escape Character）</h2><p>跳脫字元（Escape Character），又稱轉義字元（陸譯）、逃逸字元、逸出字元。是一種能夠針對字串進行特殊操作的字元，例如原本不能在字串裡面顯示單雙引號的字元，所以透過反斜線（<code>\</code>）結合單雙引號形成一個跳脫字元，就能夠變成一種能夠出現在字串內的字元。</p><p>話說這麼多，跳脫字元其實本身還是一個字元（廢話XD），總之他就是一種特殊的字元，能讓字串的操作變得更加多元、方便。</p><p>所以要使用跳脫字元之前，必須要有一個反斜線存在（<code>\</code>）。</p><p>以下有個表格是關於跳脫字元的使用（表格來源：<a target="_blank" rel="noopener external nofollow noreferrer" href="https://www.runoob.com/lua/lua-strings.html">Lua 字符串 | 菜鸟教程</a>）：</p><div class="table-container"><table><thead><tr><th>跳脫字元</th><th>意義</th><th>ASCII碼（十進位）</th></tr></thead><tbody><tr><td>\a</td><td>響鈴（BEL：bell）</td><td>007</td></tr><tr><td>\b</td><td>退格（BS：BackSpace），將目前位置移到前一列（換言之，就是刪除鍵）</td><td>008</td></tr><tr><td>\f</td><td>換頁（FF：Form Feed），將目前位置移到下頁開頭。</td><td>012</td></tr><tr><td>\n</td><td>換行（LF：Line Feed），將目前位置移到下一行開頭。</td><td>010</td></tr><tr><td>\r</td><td>回車（CR：Carriage Return），將目前位置移到本行開頭</td><td>013</td></tr><tr><td>\t</td><td>水平製表（HT：Horizontal Tab）（跳到下一個 TAB 位置，也就是按一下 tab 縮排）</td><td>009</td></tr><tr><td>\v</td><td>垂直製表（VT：Vertical Tab）</td><td>011</td></tr><tr><td>\</td><td>代表一個反斜線字元’’\’</td><td>092</td></tr><tr><td>\’</td><td>代表一個單引號字元</td><td>039</td></tr><tr><td>\”</td><td>代表一個雙引號字元</td><td>034</td></tr><tr><td>\0</td><td>空字元（NULL）</td><td>000</td></tr><tr><td>\ddd</td><td>1 到 3 位八進位數所代表的任意字元</td><td>三位八進位</td></tr><tr><td>\xhh</td><td>1 到 2 位十六進位所代表的任意字元</td><td>二位十六進位</td></tr></tbody></table></div><p>這個表格呢，等我們真的有需要用到它的功能時，再來看就好了，硬要說一個常用的話，或許就是 \n 了吧。</p><p>然後讓我們來練習一下：）</p><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(<span class="string">&quot;str\ning&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;\&quot;string\&quot;&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;strin\0g&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;st\bring&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;s\ftring&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;strin\rg&quot;</span>)</span><br></pre></td></tr></table></figure><p>輸出結果：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">str</span><br><span class="line">ing</span><br><span class="line">&quot;string&quot;</span><br><span class="line">string</span><br><span class="line">sring</span><br><span class="line">s</span><br><span class="line"> tring</span><br><span class="line">gtrin</span><br></pre></td></tr></table></figure><p>不曉得各位有沒有發現，Lua 的 print() 好像會自動幫我們換行欸？如果我不想換行怎麼辦？沒關係，以下這個函數就能夠實現不換行的機制：<code>io.write()</code></p><h2 id="string-的方法（Method）"><a href="#string-的方法（Method）" class="headerlink" title="string 的方法（Method）"></a>string 的方法（Method）</h2><p>方法（Method）是什麼？這個問題，我們需要牽涉到程式設計當中，一個很重要的概念，稱之為類（Class），通常有 class 的語言，在程式設計上都被稱之為物件導向程式設計（Object-oriented programming）。</p><p>而方法其實是一種函數，屬於 class 的一部分，也就是說一個 class 當中可以有很多方法，這些方法都具有不同的功能，目前只要先理解這樣就好。</p><p>以下表格來源：<a target="_blank" rel="noopener external nofollow noreferrer" href="https://www.runoob.com/lua/lua-strings.html">Lua 字符串 | 菜鸟教程</a></p><div class="table-container"><table><thead><tr><th>Number</th><th>方法及用途</th></tr></thead><tbody><tr><td>1</td><td><strong>string.upper(argument)</strong> : 字串全部轉為大寫字母。</td></tr><tr><td>2</td><td><strong>string.lower(argument)</strong> : 字串全部轉為小寫字母。</td></tr><tr><td>3</td><td><strong>string.gsub(mainString,findString,replaceString,num)</strong> : 在字串中替換。mainString 為要操作的字串，findString 為被替換的字元，replaceString 要替換的字元，num 替換次數（可以忽略，則全部替換）。</td></tr><tr><td>4</td><td><strong>string.find(str, substr, [init, [plain]])</strong> : 在一個指定的目標字串 str 中搜尋指定的內容 substr，如果找到了一個符合的子字串，就會回傳這個子字串的起始索引和結束索引，不存在則回傳 nil。<code>init</code> 指定了搜尋的起始位置，預設為 1，可以是一個負數，表示從後往前數的字元數。<code>plain</code> 表示是否使用簡單模式，預設為 false、true，只做簡單的查找子字串的操作，false 表示使用使用正規模式比對。</td></tr><tr><td>5</td><td><strong>string.reverse(arg)</strong> : 字串反轉</td></tr><tr><td>6</td><td><strong>string.format(…)</strong> : 回傳一個類似 printf（C 語言 print 函數，表示格式化）的格式化字串</td></tr><tr><td>7</td><td><strong>string.char(arg) 和 string.byte(arg[,int])</strong> : char 將整數數字轉成字元並連接，byte 轉換字元為整數值(可以指定某個字元，預設第一個字元)。</td></tr><tr><td>8</td><td><strong>string.len(arg)</strong> : 計算字串長度。</td></tr><tr><td>9</td><td><strong>string.rep(string, n)</strong> : 回傳字串 string 的 n 個拷貝</td></tr><tr><td>10</td><td><strong>..</strong> : 連接兩個子字串</td></tr><tr><td>11</td><td><strong>string.gmatch(str, pattern)</strong> : 回傳一個迭代器函數，每次呼叫這個函數，回傳一個在字串 str 找到的下一個符合 pattern 描述的子字串。如果參數 pattern 所描述的字串沒有找到，迭代函數回傳 nil。</td></tr><tr><td>12</td><td><strong>string.match(str, pattern, init)</strong> : string.match() 只尋找來源字串 str 中的第一個配對。參數 init 為可選，指定搜尋過程的起點，預設為 1。在成功配對時，函數將回傳配對運算式中的所有捕獲結果；如果沒有設置捕獲標記，則回傳整個配對字串。當沒有成功的配對時，回傳 nil。</td></tr></tbody></table></div><p>:::spoiler 點開看以上方法的詳細範例<br></p><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 定義一個字串</span></span><br><span class="line"><span class="keyword">local</span> str = <span class="string">&quot;Hello, Lua!&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 1. 將字串轉為大寫</span></span><br><span class="line"><span class="keyword">local</span> upperStr = <span class="built_in">string</span>.<span class="built_in">upper</span>(str)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;Uppercase: &quot;</span> .. upperStr)</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 2. 將字串轉為小寫</span></span><br><span class="line"><span class="keyword">local</span> lowerStr = <span class="built_in">string</span>.<span class="built_in">lower</span>(str)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;Lowercase: &quot;</span> .. lowerStr)</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 3. 替換字串中的字元</span></span><br><span class="line"><span class="keyword">local</span> replacedStr = <span class="built_in">string</span>.<span class="built_in">gsub</span>(str, <span class="string">&quot;Lua&quot;</span>, <span class="string">&quot;World&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;Replaced: &quot;</span> .. replacedStr)</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 4. 搜尋字串中的子字串</span></span><br><span class="line"><span class="keyword">local</span> startIdx, endIdx = <span class="built_in">string</span>.<span class="built_in">find</span>(str, <span class="string">&quot;Lua&quot;</span>)</span><br><span class="line"><span class="keyword">if</span> startIdx <span class="keyword">then</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;Found &#x27;Lua&#x27; at: &quot;</span> .. startIdx .. <span class="string">&quot; to &quot;</span> .. endIdx)</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;&#x27;Lua&#x27; not found&quot;</span>)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 5. 反轉字串</span></span><br><span class="line"><span class="keyword">local</span> reversedStr = <span class="built_in">string</span>.<span class="built_in">reverse</span>(str)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;Reversed: &quot;</span> .. reversedStr)</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 6. 格式化字串</span></span><br><span class="line"><span class="keyword">local</span> formattedStr = <span class="built_in">string</span>.<span class="built_in">format</span>(<span class="string">&quot;Formatted: %s&quot;</span>, str)</span><br><span class="line"><span class="built_in">print</span>(formattedStr)</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 7. 將整數轉為字元，並將字元轉為整數</span></span><br><span class="line"><span class="keyword">local</span> charStr = <span class="built_in">string</span>.<span class="built_in">char</span>(<span class="number">76</span>, <span class="number">117</span>, <span class="number">97</span>) <span class="comment">-- &#x27;Lua&#x27;</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;Char: &quot;</span> .. charStr)</span><br><span class="line"><span class="keyword">local</span> byteVal = <span class="built_in">string</span>.<span class="built_in">byte</span>(str, <span class="number">1</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;Byte of first character: &quot;</span> .. byteVal)</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 8. 計算字串長度</span></span><br><span class="line"><span class="keyword">local</span> strLen = <span class="built_in">string</span>.<span class="built_in">len</span>(str)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;Length: &quot;</span> .. strLen)</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 9. 回傳字串的多個拷貝</span></span><br><span class="line"><span class="keyword">local</span> repeatedStr = <span class="built_in">string</span>.<span class="built_in">rep</span>(str, <span class="number">2</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;Repeated: &quot;</span> .. repeatedStr)</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 10. 連接兩個子字串</span></span><br><span class="line"><span class="keyword">local</span> concatenatedStr = str .. <span class="string">&quot; Let&#x27;s learn Lua!&quot;</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;Concatenated: &quot;</span> .. concatenatedStr)</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 11. 使用迭代器函數匹配字串</span></span><br><span class="line"><span class="keyword">for</span> word <span class="keyword">in</span> <span class="built_in">string</span>.<span class="built_in">gmatch</span>(str, <span class="string">&quot;%a+&quot;</span>) <span class="keyword">do</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;Word: &quot;</span> .. word)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 12. 匹配字串中的第一個配對</span></span><br><span class="line"><span class="keyword">local</span> matchedStr = <span class="built_in">string</span>.<span class="built_in">match</span>(str, <span class="string">&quot;L%a+&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;Matched: &quot;</span> .. matchedStr)</span><br></pre></td></tr></table></figure><p></p><p>輸出結果：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">Uppercase: HELLO, LUA!</span><br><span class="line">Lowercase: hello, lua!</span><br><span class="line">Replaced: Hello, World!</span><br><span class="line">Found &#x27;Lua&#x27; at: 8 to 10</span><br><span class="line">Reversed: !auL ,olleH</span><br><span class="line">Formatted: Hello, Lua!</span><br><span class="line">Char: Lua</span><br><span class="line">Byte of first character: 72</span><br><span class="line">Length: 11</span><br><span class="line">Repeated: Hello, Lua!Hello, Lua!</span><br><span class="line">Concatenated: Hello, Lua! Let&#x27;s learn Lua!</span><br><span class="line">Word: Hello</span><br><span class="line">Word: Lua</span><br><span class="line">Matched: Lua</span><br></pre></td></tr></table></figure><p>:::</p><h2 id="字串格式化（String-Formating）"><a href="#字串格式化（String-Formating）" class="headerlink" title="字串格式化（String-Formating）"></a>字串格式化（String-Formating）</h2><p>字串格式化是一個相當重要的語法之一，幾乎是每個程式語言都不可或缺的東西。實際應用有：進度條、醫院掛號顯示號碼、字串+顯示目前數字等等。</p><p>總之讓字串格式化之後，就能有許多操作、運算的空間，能讓原本不能動的字串，變成活生生的字串。</p><blockquote><p>Lua 提供了 <code>string.format()</code> 函數來產生具有特定格式的字串，函數的第一個參數是格式， 之後是對應格式中每個代號的各種資料。</p></blockquote><p>以下是格式化字串的 format specifiers（格式化規範符號），來源自 <a target="_blank" rel="noopener external nofollow noreferrer" href="https://www.runoob.com/lua/lua-strings.html">Lua 字符串 | 菜鸟教程</a>：</p><ul><li>%c - 接受一個數字，並將其轉換為 ASCII 碼表中對應的字元（將ASCII碼轉成字元）</li><li>%d、%i - 接受一個數字並將其轉換為有號的整數格式</li><li>%o - 接受一個數字並將其轉換為八進位數格式</li><li>%u - 接受一個數字並將其轉換為無號整數格式</li><li>%x - 接受一個數字並將其轉換為十六進位數格式，使用小寫字母</li><li>%X - 接受一個數字並將其轉換為十六進位數格式，使用大寫字母</li><li>%e - 接受一個數字並將其轉換為科學記號格式，使用小寫字母 e</li><li>%E - 接受一個數字並將其轉換為科學記號格式，使用大寫字母 E</li><li>%f - 接受一個數字並將其轉換為浮點數格式</li><li>%g(%G) - 接受一個數字並將其轉換為 %e（%E，對應 %G）及 %f 中較短的一種格式</li><li>%q - 接受一個字串並將其轉換為可安全被 Lua 編譯器讀入的格式</li><li>%s - 接受一個字串並按照給定的參數格式化該字串</li></ul><p>:::info<br>註：%u 被稱為是無號整數，是因為 C 語言有資料型態為 unsigned int、unsigned char 等等。unsigned（u） 就是沒有負數的意思，只有自然數。<br>:::</p><blockquote><p>為進一步細化格式，可以在 % 號後新增參數，參數將以如下的順序讀入：</p></blockquote><ol><li>符號：一個 + 號表示其後的數字 format specifiers 會讓正數顯示正號。預設只有負數顯示符號。</li><li>占位修飾符號：一個 0，在後面指定了字串寬度時佔位用。不填時的預設占位修飾符號是空格。</li><li>對齊標識：在指定了字串寬度時，預設為向右對齊，增加 - 號可以改為向左對齊。</li><li>寬度數值：寬度數值用於指定輸出內容的最小寬度。如果實際內容的寬度小於指定的寬度數值，則會使用占位修飾符號（預設為空格）進行填充，以達到指定的寬度。（如：%05d、%5d）</li><li>小數位數 / 字串裁切：在寬度數值後增加的小數部分 n，若後接 f（浮點數 format specifiers，如 %6.3f）則設定該浮點數的小數只保留 n 位，若後接 s（字串 format specifiers，如 %5.3s）則設定該字串只顯示前 n 位。</li></ol><p>以下是個範例：</p><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">local</span> number = <span class="number">123.456</span></span><br><span class="line"><span class="keyword">local</span> integer = <span class="number">42</span></span><br><span class="line"><span class="keyword">local</span> str = <span class="string">&quot;Hello, Lua!&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 1. 符號：顯示正號</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">string</span>.<span class="built_in">format</span>(<span class="string">&quot;%+d&quot;</span>, integer))  <span class="comment">-- +42</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 2. 占位修飾符號：使用 0 進行填充</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">string</span>.<span class="built_in">format</span>(<span class="string">&quot;%05d&quot;</span>, integer))  <span class="comment">-- 00042</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 3. 對齊標識：向左對齊</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">string</span>.<span class="built_in">format</span>(<span class="string">&quot;%-5d&quot;</span>, integer))  <span class="comment">-- 42   (後面有三個空格)</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 4. 寬度數值：指定最小寬度</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">string</span>.<span class="built_in">format</span>(<span class="string">&quot;%10s&quot;</span>, str))  <span class="comment">-- Hello, Lua!</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 5. 小數位數 / 字串裁切</span></span><br><span class="line"><span class="comment">-- 小數位數：保留 2 位小數</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">string</span>.<span class="built_in">format</span>(<span class="string">&quot;%.2f&quot;</span>, number))  <span class="comment">-- 123.46</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 字串裁切：只顯示前 5 位</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">string</span>.<span class="built_in">format</span>(<span class="string">&quot;%.5s&quot;</span>, str))  <span class="comment">-- Hello</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 綜合範例：同時使用多個參數</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">string</span>.<span class="built_in">format</span>(<span class="string">&quot;%+010.2f&quot;</span>, number))  <span class="comment">-- +0000123.46</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">string</span>.<span class="built_in">format</span>(<span class="string">&quot;%-10.5s&quot;</span>, str))  <span class="comment">-- Hello     (後面有五個空格)</span></span><br></pre></td></tr></table></figure><p>輸出結果：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">+42</span><br><span class="line">00042</span><br><span class="line">42   </span><br><span class="line">Hello, Lua!</span><br><span class="line">123.46</span><br><span class="line">Hello</span><br><span class="line">+000123.46</span><br><span class="line">Hello</span><br></pre></td></tr></table></figure><p>再來一個練習範例：</p><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">local</span> number = <span class="number">12345</span></span><br><span class="line"><span class="keyword">local</span> float_number = <span class="number">123.456</span></span><br><span class="line"><span class="keyword">local</span> str = <span class="string">&quot;Hello, Lua!&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">string</span>.<span class="built_in">format</span>(<span class="string">&quot;%%c: %c&quot;</span>, number))  <span class="comment">-- 將數字轉換為 ASCII 字元</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">string</span>.<span class="built_in">format</span>(<span class="string">&quot;%%d: %d&quot;</span>, number))  <span class="comment">-- 將數字轉換為有號整數</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">string</span>.<span class="built_in">format</span>(<span class="string">&quot;%%i: %i&quot;</span>, number))  <span class="comment">-- 將數字轉換為有號整數</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">string</span>.<span class="built_in">format</span>(<span class="string">&quot;%%o: %o&quot;</span>, number))  <span class="comment">-- 將數字轉換為八進位數</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">string</span>.<span class="built_in">format</span>(<span class="string">&quot;%%u: %u&quot;</span>, number))  <span class="comment">-- 將數字轉換為無號整數</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">string</span>.<span class="built_in">format</span>(<span class="string">&quot;%%x: %x&quot;</span>, number))  <span class="comment">-- 將數字轉換為十六進位數（小寫）</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">string</span>.<span class="built_in">format</span>(<span class="string">&quot;%%X: %X&quot;</span>, number))  <span class="comment">-- 將數字轉換為十六進位數（大寫）</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">string</span>.<span class="built_in">format</span>(<span class="string">&quot;%%e: %e&quot;</span>, float_number))  <span class="comment">-- 將數字轉換為科學記號（小寫 e）</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">string</span>.<span class="built_in">format</span>(<span class="string">&quot;%%E: %E&quot;</span>, float_number))  <span class="comment">-- 將數字轉換為科學記號（大寫 E）</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">string</span>.<span class="built_in">format</span>(<span class="string">&quot;%%f: %f&quot;</span>, float_number))  <span class="comment">-- 將數字轉換為浮點數</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">string</span>.<span class="built_in">format</span>(<span class="string">&quot;%%g: %g&quot;</span>, float_number))  <span class="comment">-- 將數字轉換為 %e 或 %f 中較短的一種格式</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">string</span>.<span class="built_in">format</span>(<span class="string">&quot;%%G: %G&quot;</span>, float_number))  <span class="comment">-- 將數字轉換為 %E 或 %f 中較短的一種格式</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">string</span>.<span class="built_in">format</span>(<span class="string">&quot;%%q: %q&quot;</span>, str))  <span class="comment">-- 將字串轉換為可被 Lua 編譯器讀入的格式</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">string</span>.<span class="built_in">format</span>(<span class="string">&quot;%%s: %s&quot;</span>, str))  <span class="comment">-- 將字串按照給定的參數格式化</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 複合型格式化</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">string</span>.<span class="built_in">format</span>(<span class="string">&quot;數字 %d 的八進位表示為 %o&quot;</span>, number, number))</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">string</span>.<span class="built_in">format</span>(<span class="string">&quot;數字 %d 的十六進位表示為 %x&quot;</span>, number, number))</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">string</span>.<span class="built_in">format</span>(<span class="string">&quot;浮點數 %f 的科學記號表示為 %e&quot;</span>, float_number, float_number))</span><br></pre></td></tr></table></figure><p>輸出結果：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">%c: 9</span><br><span class="line">%d: 12345</span><br><span class="line">%i: 12345</span><br><span class="line">%o: 30071</span><br><span class="line">%u: 12345</span><br><span class="line">%x: 3039</span><br><span class="line">%X: 3039</span><br><span class="line">%e: 1.234560e+02</span><br><span class="line">%E: 1.234560E+02</span><br><span class="line">%f: 123.456000</span><br><span class="line">%g: 123.456</span><br><span class="line">%G: 123.456</span><br><span class="line">%q: &quot;Hello, Lua!&quot;</span><br><span class="line">%s: Hello, Lua!</span><br><span class="line">數字 12345 的八進位表示為 30071</span><br><span class="line">數字 12345 的十六進位表示為 3039</span><br><span class="line">浮點數 123.456000 的科學記號表示為 1.234560e+02</span><br></pre></td></tr></table></figure><h2 id="字串匹配模式"><a href="#字串匹配模式" class="headerlink" title="字串匹配模式"></a>字串匹配模式</h2><blockquote><p>Lua 中的匹配模式直接用常規的字串來描述。它用於模式匹配函數 <code>string.find</code>、 <code>string.gmatch</code>、<code>string.gsub</code>、<code>string.match</code>。</p></blockquote><p>以下是一個範例，呈現 dd/mm/yyyy 格式的日期（來自：<a target="_blank" rel="noopener external nofollow noreferrer" href="https://www.runoob.com/lua/lua-strings.html">Lua 字符串 | 菜鸟教程</a>）：</p><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">s = <span class="string">&quot;Deadline is 30/05/1999, firm&quot;</span></span><br><span class="line"><span class="built_in">date</span> = <span class="string">&quot;%d%d/%d%d/%d%d%d%d&quot;</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">string</span>.<span class="built_in">sub</span>(s, <span class="built_in">string</span>.<span class="built_in">find</span>(s, <span class="built_in">date</span>)))    <span class="comment">--&gt; 30/05/1999</span></span><br></pre></td></tr></table></figure><p>輸出結果：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">30/05/1999</span><br></pre></td></tr></table></figure><p>有關於 Lua 字元類別種類，可看以下條列：</p><ul><li>.（點）：與任何字元配對</li><li>%a：與任何字母配對</li><li>%c：與任何控制符配對（例如 \n）</li><li>%d：與任何數字配對</li><li>%l：與任何小寫字母配對</li><li>%p：與任何標點（punctuation）配對</li><li>%s：與空白字元配對</li><li>%u：與任何大寫字母配對</li><li>%w：與任何字母 / 數字配對</li><li>%x：與任何十六進制數配對</li><li>%z：與任何代表 0 的字元配對</li><li>%x（此處 x 是非字母非數字字元）：與字元 x 配對。主要用來處理運算式中有功能的字元（^$()%.[]*+-?）的配對問題，例如 %% 與 % 配對。</li><li>[數個字元類別]：與任何 [] 中包含的字元類別配對。例如 [%w<em>] 與任何字母 / 數字，或底線符號(</em>)配對。</li><li><sup><a href="#fn_數個字元類別" id="reffn_數個字元類別">數個字元類別</a></sup>：與任何”不”包含在 [] 中的字元類別配對。例如 <sup><a href="#fn_%s" id="reffn_%s">%s</a></sup> 與任何非空白字元配對。</li></ul><blockquote><p>當上述的字元類別以大寫書寫時，表示與非此字元類別的任何字元配對。例如，%S 表示與任何非空白字元配對。例如，’%A’非字母的字元：</p></blockquote><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt; <span class="built_in">print</span>(<span class="built_in">string</span>.<span class="built_in">gsub</span>(<span class="string">&quot;hello, up-down!&quot;</span>, <span class="string">&quot;%A&quot;</span>, <span class="string">&quot;.&quot;</span>))</span><br><span class="line">hello..up.down.    <span class="number">4</span></span><br></pre></td></tr></table></figure><p>註：有一個 &gt; 表示程式碼是在 Shell 底下執行。</p><p>接下來，同樣也是做練習啦，不練習不會進步～：</p><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">local</span> test_string = <span class="string">&quot;Hello, World! 1234\n&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">local</span> <span class="function"><span class="keyword">function</span> <span class="title">test_pattern</span><span class="params">(pattern, description)</span></span></span><br><span class="line">    <span class="keyword">if</span> <span class="built_in">string</span>.<span class="built_in">match</span>(test_string, pattern) <span class="keyword">then</span></span><br><span class="line">        <span class="built_in">print</span>(description .. <span class="string">&quot;: 匹配成功&quot;</span>)</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        <span class="built_in">print</span>(description .. <span class="string">&quot;: 匹配失敗&quot;</span>)</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">test_pattern(<span class="string">&quot;.&quot;</span>, <span class="string">&quot;與任何字元配對&quot;</span>)</span><br><span class="line">test_pattern(<span class="string">&quot;%a&quot;</span>, <span class="string">&quot;與任何字母配對&quot;</span>)</span><br><span class="line">test_pattern(<span class="string">&quot;%c&quot;</span>, <span class="string">&quot;與任何控制符配對&quot;</span>)</span><br><span class="line">test_pattern(<span class="string">&quot;%d&quot;</span>, <span class="string">&quot;與任何數字配對&quot;</span>)</span><br><span class="line">test_pattern(<span class="string">&quot;%l&quot;</span>, <span class="string">&quot;與任何小寫字母配對&quot;</span>)</span><br><span class="line">test_pattern(<span class="string">&quot;%p&quot;</span>, <span class="string">&quot;與任何標點配對&quot;</span>)</span><br><span class="line">test_pattern(<span class="string">&quot;%s&quot;</span>, <span class="string">&quot;與空白字元配對&quot;</span>)</span><br><span class="line">test_pattern(<span class="string">&quot;%u&quot;</span>, <span class="string">&quot;與任何大寫字母配對&quot;</span>)</span><br><span class="line">test_pattern(<span class="string">&quot;%w&quot;</span>, <span class="string">&quot;與任何字母 / 數字配對&quot;</span>)</span><br><span class="line">test_pattern(<span class="string">&quot;%x&quot;</span>, <span class="string">&quot;與任何十六進制數配對&quot;</span>)</span><br><span class="line">test_pattern(<span class="string">&quot;%z&quot;</span>, <span class="string">&quot;與任何代表 0 的字元配對&quot;</span>)</span><br><span class="line">test_pattern(<span class="string">&quot;%%&quot;</span>, <span class="string">&quot;與字元 % 配對&quot;</span>)</span><br><span class="line">test_pattern(<span class="string">&quot;[%w_]&quot;</span>, <span class="string">&quot;與任何字母 / 數字或底線符號配對&quot;</span>)</span><br><span class="line">test_pattern(<span class="string">&quot;[^%s]&quot;</span>, <span class="string">&quot;與任何非空白字元配對&quot;</span>)</span><br><span class="line"></span><br><span class="line">test_pattern(<span class="string">&quot;%a+&quot;</span>, <span class="string">&quot;與一個或多個字母配對&quot;</span>)</span><br><span class="line">test_pattern(<span class="string">&quot;%d+&quot;</span>, <span class="string">&quot;與一個或多個數字配對&quot;</span>)</span><br><span class="line">test_pattern(<span class="string">&quot;%s+&quot;</span>, <span class="string">&quot;與一個或多個空白字元配對&quot;</span>)</span><br><span class="line">test_pattern(<span class="string">&quot;%u%l+&quot;</span>, <span class="string">&quot;與一個大寫字母後跟隨一個或多個小寫字母配對&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;測試字串: &quot;</span> .. test_string)</span><br></pre></td></tr></table></figure><p>輸出結果：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">與任何字元配對: 匹配成功</span><br><span class="line">與任何字母配對: 匹配成功</span><br><span class="line">與任何控制符配對: 匹配成功</span><br><span class="line">與任何數字配對: 匹配成功</span><br><span class="line">與任何小寫字母配對: 匹配成功</span><br><span class="line">與任何標點配對: 匹配成功</span><br><span class="line">與空白字元配對: 匹配成功</span><br><span class="line">與任何大寫字母配對: 匹配成功</span><br><span class="line">與任何字母 / 數字配對: 匹配成功</span><br><span class="line">與任何十六進制數配對: 匹配成功</span><br><span class="line">與任何代表 0 的字元配對: 匹配失敗</span><br><span class="line">與字元 % 配對: 匹配失敗</span><br><span class="line">與任何字母 / 數字或底線符號配對: 匹配成功</span><br><span class="line">與任何非空白字元配對: 匹配成功</span><br><span class="line">與一個或多個字母配對: 匹配成功</span><br><span class="line">與一個或多個數字配對: 匹配成功</span><br><span class="line">與一個或多個空白字元配對: 匹配成功</span><br><span class="line">與一個大寫字母後跟隨一個或多個小寫字母配對: 匹配成功</span><br><span class="line">測試字串: Hello, World! 1234</span><br></pre></td></tr></table></figure><blockquote><p>在模式匹配中有一些特殊字元，他們有特殊的意義，Lua中的特殊字元如下：</p></blockquote><p><code>( ) . % + - * ? [ ^ $</code></p><blockquote><p>‘%’ 用作特殊字元的跳脫字元，因此 ‘%.’ 匹配點；’%%’ 匹配字元 ‘%’。跳脫字元 ‘%’ 不僅可以用來跳脫特殊字元，還可以用於所有的非字母的字元。</p></blockquote><p>以下節錄自：<a target="_blank" rel="noopener external nofollow noreferrer" href="https://www.runoob.com/lua/lua-strings.html">Lua 字符串 | 菜鸟教程</a></p><p><strong>模式條目可以是：</strong></p><ul><li>單一字元類別符合該類別中任意單一字元；</li><li>單一字元類別跟一個 ‘*’，將匹配 0 或多個該類別的字元。這個條目總是匹配盡可能長的字串；</li><li>單一字元類別跟一個 ‘+’，將匹配 1 或更多該類別的字元。這個條目總是匹配盡可能長的字串；</li><li>單一字元類別跟一個 ‘-‘，將匹配 0 或更多該類別的字元。和 ‘*’ 不同，這個條目總是匹配盡可能短的字串；</li><li>單一字元類別跟一個 ‘?’，將匹配 0 或一個該類別的字元。只要有可能，它就會匹配一個；</li><li>%n，這裡的 n 可以從 1 到 9；這個條目匹配一個等於 n 號捕獲物（後面會描述）的子字串。</li><li>%bxy，這裡的 x 和 y 是兩個明確的字元；這個條目匹配以 x 開始 y 結束，並且其中 x 和 y 保持平衡的字串。意思是，如果從左到右讀這個字串，對每次讀到一個 x 就 +1，讀到一個 y 就 -1，最終結束處的那個 y 是第一個記數到 0 的 y。舉個例子，條目 %b() 可以匹配到括號平衡的運算式。</li><li>%f[set]，邊境模式；這個條目會匹配到一個位於 set 內某個字元之前的一個空字串，且這個位置的前一個字元不屬於 set。集合 set 的意思如前面所述。配對出的那個空字串之開始和結束點的計算就看成該處有個字元 ‘\0’ 一樣。</li></ul><p>以下是一個範例：</p><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 測試字串 1</span></span><br><span class="line"><span class="keyword">local</span> test_str = <span class="string">&quot;abc123xyz&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 單一字元類別匹配</span></span><br><span class="line"><span class="keyword">local</span> pattern1 = <span class="string">&quot;[a-z]&quot;</span>  <span class="comment">-- 匹配任意小寫字母</span></span><br><span class="line"><span class="built_in">print</span>(test_str:<span class="built_in">match</span>(pattern1))  <span class="comment">-- a</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 單一字元類別跟 &#x27;*&#x27;</span></span><br><span class="line"><span class="keyword">local</span> pattern2 = <span class="string">&quot;[a-z]*&quot;</span>  <span class="comment">-- 匹配0或多個小寫字母</span></span><br><span class="line"><span class="built_in">print</span>(test_str:<span class="built_in">match</span>(pattern2))  <span class="comment">-- abc</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 單一字元類別跟 &#x27;+&#x27;</span></span><br><span class="line"><span class="keyword">local</span> pattern3 = <span class="string">&quot;[a-z]+&quot;</span>  <span class="comment">-- 匹配1或多個小寫字母</span></span><br><span class="line"><span class="built_in">print</span>(test_str:<span class="built_in">match</span>(pattern3))  <span class="comment">-- abc</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 單一字元類別跟 &#x27;-&#x27;</span></span><br><span class="line"><span class="keyword">local</span> pattern4 = <span class="string">&quot;[a-z]-&quot;</span>  <span class="comment">-- 匹配0或多個小寫字母（盡可能短）</span></span><br><span class="line"><span class="built_in">print</span>(test_str:<span class="built_in">match</span>(pattern4))  <span class="comment">-- a</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 單一字元類別跟 &#x27;?&#x27;</span></span><br><span class="line"><span class="keyword">local</span> pattern5 = <span class="string">&quot;[a-z]?&quot;</span>  <span class="comment">-- 匹配0或1個小寫字母</span></span><br><span class="line"><span class="built_in">print</span>(test_str:<span class="built_in">match</span>(pattern5))  <span class="comment">-- a</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- %n 捕獲物匹配</span></span><br><span class="line"><span class="keyword">local</span> pattern6 = <span class="string">&quot;(%d)(%a)%1&quot;</span>  <span class="comment">-- 匹配數字後跟字母，再跟相同的數字</span></span><br><span class="line"><span class="keyword">local</span> match1, match2 = test_str:<span class="built_in">match</span>(pattern6)</span><br><span class="line"><span class="built_in">print</span>(match1, match2)  <span class="comment">-- nil nil (因為沒有符合的模式)</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- %bxy 平衡匹配</span></span><br><span class="line"><span class="keyword">local</span> balanced_str = <span class="string">&quot;a(b(c)d)e&quot;</span></span><br><span class="line"><span class="keyword">local</span> pattern7 = <span class="string">&quot;%b()&quot;</span>  <span class="comment">-- 匹配平衡的括號</span></span><br><span class="line"><span class="built_in">print</span>(balanced_str:<span class="built_in">match</span>(pattern7))  <span class="comment">-- (b(c)d)</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- %f[set] 邊境模式匹配</span></span><br><span class="line"><span class="keyword">local</span> pattern8 = <span class="string">&quot;%f[%d]&quot;</span>  <span class="comment">-- 匹配位於數字前的空字串</span></span><br><span class="line"><span class="keyword">local</span> start_pos = test_str:<span class="built_in">find</span>(pattern8)</span><br><span class="line"><span class="built_in">print</span>(start_pos)  <span class="comment">-- 4 (因為 &#x27;1&#x27; 是第一個數字)</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 測試字串 2</span></span><br><span class="line"><span class="keyword">local</span> test_str2 = <span class="string">&quot;hello123world&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 單一字元類別匹配</span></span><br><span class="line"><span class="keyword">local</span> pattern9 = <span class="string">&quot;[a-z]&quot;</span>  <span class="comment">-- 匹配任意小寫字母</span></span><br><span class="line"><span class="built_in">print</span>(test_str2:<span class="built_in">match</span>(pattern9))  <span class="comment">-- h</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 單一字元類別跟 &#x27;*&#x27;</span></span><br><span class="line"><span class="keyword">local</span> pattern10 = <span class="string">&quot;[a-z]*&quot;</span>  <span class="comment">-- 匹配0或多個小寫字母</span></span><br><span class="line"><span class="built_in">print</span>(test_str2:<span class="built_in">match</span>(pattern10))  <span class="comment">-- hello</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 單一字元類別跟 &#x27;+&#x27;</span></span><br><span class="line"><span class="keyword">local</span> pattern11 = <span class="string">&quot;[a-z]+&quot;</span>  <span class="comment">-- 匹配1或多個小寫字母</span></span><br><span class="line"><span class="built_in">print</span>(test_str2:<span class="built_in">match</span>(pattern11))  <span class="comment">-- hello</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 單一字元類別跟 &#x27;-&#x27;</span></span><br><span class="line"><span class="keyword">local</span> pattern12 = <span class="string">&quot;[a-z]-&quot;</span>  <span class="comment">-- 匹配0或多個小寫字母（盡可能短）</span></span><br><span class="line"><span class="built_in">print</span>(test_str2:<span class="built_in">match</span>(pattern12))  <span class="comment">-- h</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 單一字元類別跟 &#x27;?&#x27;</span></span><br><span class="line"><span class="keyword">local</span> pattern13 = <span class="string">&quot;[a-z]?&quot;</span>  <span class="comment">-- 匹配0或1個小寫字母</span></span><br><span class="line"><span class="built_in">print</span>(test_str2:<span class="built_in">match</span>(pattern13))  <span class="comment">-- h</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- %n 捕獲物匹配</span></span><br><span class="line"><span class="keyword">local</span> pattern14 = <span class="string">&quot;(%d)(%a)%1&quot;</span>  <span class="comment">-- 匹配數字後跟字母，再跟相同的數字</span></span><br><span class="line"><span class="keyword">local</span> match3, match4 = test_str2:<span class="built_in">match</span>(pattern14)</span><br><span class="line"><span class="built_in">print</span>(match3, match4)  <span class="comment">-- nil nil (因為沒有符合的模式)</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- %bxy 平衡匹配</span></span><br><span class="line"><span class="keyword">local</span> balanced_str2 = <span class="string">&quot;a(b(c)d)e&quot;</span></span><br><span class="line"><span class="keyword">local</span> pattern15 = <span class="string">&quot;%b()&quot;</span>  <span class="comment">-- 匹配平衡的括號</span></span><br><span class="line"><span class="built_in">print</span>(balanced_str2:<span class="built_in">match</span>(pattern15))  <span class="comment">-- (b(c)d)</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- %f[set] 邊境模式匹配</span></span><br><span class="line"><span class="keyword">local</span> pattern16 = <span class="string">&quot;%f[%d]&quot;</span>  <span class="comment">-- 匹配位於數字前的空字串</span></span><br><span class="line"><span class="keyword">local</span> start_pos2 = test_str2:<span class="built_in">find</span>(pattern16)</span><br><span class="line"><span class="built_in">print</span>(start_pos2)  <span class="comment">-- 6 (因為 &#x27;1&#x27; 是第一個數字)</span></span><br></pre></td></tr></table></figure><p>:::warning<br>在 Lua 中，冒號 (:) 是一種語法糖（Syntactic sugar，暫且別管這啥）。</p><p>str:match(“%d”) 等價於 string.match(str, “%d”)。冒號語法自動將 str 作為第一個參數傳遞給 string.match 函數。（總之有語法糖就能夠使程式碼變得更加簡潔有力）<br>:::</p><p>:::info<br>[a-z] 是一個字元類別（character class），表示匹配任意一個從 a 到 z 的小寫字母。這種寫法稱為範圍（range），用來指定一組連續的字元。</p><p>也有衍生以下這些寫法：</p><ul><li>[a-z0-9]：匹配任意一個小寫字母或數字。</li><li>[aeiou]：匹配任意一個母音字母（a、e、i、o、u）。<br>:::</li></ul><p>:::info<br>在 %n 捕獲物匹配的地方，小括號 () 用於捕獲匹配到的內容。這裡的 (%d) 表示捕獲一個數字，並將其儲存為第一個捕獲組。</p><p><strong>(%a)</strong>：這裡的 (%a) 表示捕獲一個字母，並將其儲存為第二個捕獲組。</p><p><strong>%1</strong>：反向引用（backreference），表示匹配第一個捕獲組的內容。在這個模式中，%1 會匹配之前捕獲的數字。</p><p>所以 <code>(%d)(%a)%1</code> 是一個包含捕獲組（capture groups）和反向引用（backreference）的模式。</p><p><code>(%d)(%a)%1</code> 可作以下三點總結：</p><ul><li>匹配一個數字，並將其捕獲為第一個捕獲組。</li><li>匹配一個字母，並將其捕獲為第二個捕獲組。</li><li>最後匹配與第一個捕獲組相同的數字。</li></ul><p>而至於都沒匹配到，看一下字串：”hello123world”</p><p>第一個匹配到數字 1，但第二個不是字母。所以只可能是 3、w，但是 3、w、o 匹配第三個 o 並不是與 3 同樣的數字（因為反向引用 %1 必須與第一個捕獲組相同數字），所以 nil。<br>:::</p><p>:::info<br>%bxy 平衡（平衡：指的是成對的符號，包括括號）匹配的部分：</p><p><code>local pattern15 = &quot;%b()&quot;</code>：x、y 都是括號，所以 <code>%b()</code> 用於匹配平衡的小括號對。</p><p>在字串 <code>&quot;a(b(c)d)e&quot;</code> 中，第一個平衡的括號對是 <code>&quot;(b(c)d)&quot;</code>，它從第二個字元開始，到第八個字元結束。需要注意的是，這個匹配包括了括號內的所有內容，包括巢狀的括號對 <code>&quot;(c)&quot;</code>。<br>:::</p><p>:::info<br>%f[set] 邊境模式匹配（frontier pattern）的部分：</p><p>%f[set] 會匹配一個位置，這個位置的前一個字元不在指定的集合 set 中，而位置本身的字元在集合中。集合 set 是由一組字元組成的，可以用一系列的字元或者字元類別（如 %d 表示數字，%s 表示空白字符等）來指定。</p><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 測試字串 2</span></span><br><span class="line"><span class="keyword">local</span> test_str2 = <span class="string">&quot;hello123world&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- %f[set] 邊境模式匹配</span></span><br><span class="line"><span class="keyword">local</span> pattern16 = <span class="string">&quot;%f[%d]&quot;</span>  <span class="comment">-- 匹配位於數字前的空字串</span></span><br><span class="line"><span class="keyword">local</span> start_pos2 = test_str2:<span class="built_in">find</span>(pattern16)</span><br><span class="line"><span class="built_in">print</span>(start_pos2)  <span class="comment">-- 6 (因為 &#x27;1&#x27; 是第一個數字)</span></span><br></pre></td></tr></table></figure><p>在這個範例當中，%f[%d] 用來匹配位於數字前的空字串位置。表示它會尋找一個位置，這個位置的前一個字元不是數字，而位置本身的字元是數字。對於識別字串中數字的開始位置非常有用。</p><p>如果 test_str2 是 “Hello 123”，則 %f[%d] 會匹配到 “ “ 和 “1” 之間的位置，因為 “ “ 不是數字，而 “1” 是數字。由於 Lua 的字串索引從 1 開始，”1” 在字符串中的位置是 7，所以 start_pos2 的值會是 7，表示 %f[%d] 匹配到的位置。</p><p>講這麼多複雜的還有舉例，總之，%f[set] 的 set 主要是找第一個出現的字元。<br>:::</p><h1 id="總結"><a href="#總結" class="headerlink" title="總結"></a>總結</h1><p>:::info<br><strong>字串表示方式</strong>：</p><ul><li>單引號：’String’</li><li>雙引號：”String”</li><li>多行字串：[[ 多行字串 ]]<br>:::</li></ul><p>:::info<br><strong>取得字串長度</strong>：</p><ul><li>string.len(字串)：取得字串長度</li><li><code>#</code>字串：取得字串長度</li><li>utf8.len(字串)：取得包含中文字的字串長度<br>:::</li></ul><p>:::info<br><strong>跳脫字元</strong>：</p><ul><li>使用反斜線 \ 來表示特殊字元，如 \n 表示換行，\” 表示雙引號等。<br>:::</li></ul><p>:::info<br><strong>字串方法（Method）</strong>：</p><ul><li>string.upper(字串)：轉為大寫</li><li>string.lower(字串)：轉為小寫</li><li>string.gsub(字串, 查找字串, 替換字串, [次數])：替換字串</li><li>string.find(字串, 子字串, [起始位置], [簡單模式])：查找子字串</li><li>string.reverse(字串)：反轉字串</li><li>string.format(格式, …)：格式化字串</li><li>string.char(數字)：將數字轉為字元</li><li>string.byte(字串, [位置])：將字元轉為數字</li><li>string.len(字串)：計算字串長度</li><li>string.rep(字串, 次數)：重複字串</li><li>..：連接兩個字串</li><li>string.gmatch(字串, 模式)：返回迭代器函數</li><li>string.match(字串, 模式, [起始位置])：匹配字串<br>:::</li></ul><p>:::info<br><strong>字串格式化</strong>：</p><ul><li>使用 string.format() 進行格式化，支持多種格式化規範符號，如 %d、%f、%s 等。<br>:::</li></ul><p>:::info<br><strong>字串匹配模式</strong>：</p><ul><li>使用 string.find、string.gmatch、string.gsub、string.match 進行模式匹配。</li><li>支援多種字元類別，如 %a（字母）、%d（數字）、%s（空白字元）等。</li><li>支援捕獲組和反向引用，如 (%d)(%a)%1。</li></ul><p><strong>常用模式條目</strong>：</p><ul><li>[a-z]：匹配任意小寫字母</li><li>[a-z]*：匹配0或多個小寫字母</li><li>[a-z]+：匹配1或多個小寫字母</li><li>[a-z]-：匹配0或多個小寫字母（盡可能短）</li><li>[a-z]?：匹配0或1個小寫字母</li><li>%b()：匹配平衡的括號</li><li>%f[set]：匹配位於 set 內某個字元之前的空字串<br>:::</li></ul><h1 id="參考資料"><a href="#參考資料" class="headerlink" title="參考資料"></a>參考資料</h1><p><a target="_blank" rel="noopener external nofollow noreferrer" href="http://lua-users.org/wiki/FrontierPattern">lua-users wiki: Frontier Pattern</a></p><p><a target="_blank" rel="noopener external nofollow noreferrer" href="https://stackoverflow.com/questions/48541679/lua-pattern-matching-series-of-same-character">Lua pattern matching - Series of same character - Stack Overflow</a></p><p><a target="_blank" rel="noopener external nofollow noreferrer" href="https://www.lagagain.com/post/30%E5%A4%A9lua%E9%87%8D%E6%8B%BE%E7%AD%86%E8%A8%9808%E5%9F%BA%E7%A4%8E1-%E9%A1%9E%E5%9E%8B-%E5%AD%97%E4%B8%B2/">【30天Lua重拾筆記08】基礎1: 類型 - 字串 | 又LAG隨性筆記</a></p><p><a target="_blank" rel="noopener external nofollow noreferrer" href="https://medium.com/learn-or-die/string-gmatch-in-lua-3f4162f0e850">簡單記錄一下 lua 中 string.gmatch 的用法 | Medium</a></p><p><a target="_blank" rel="noopener external nofollow noreferrer" href="https://www.runoob.com/lua/lua-strings.html">Lua 字符串 | 菜鸟教程</a></p></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>文章作者: </span><span class="post-copyright-info"><a href="https://luketsengtw.github.io">LukeTseng</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>文章連結: </span><span class="post-copyright-info"><a href="https://luketsengtw.github.io/posts/ca9a09b">https://luketsengtw.github.io/posts/ca9a09b</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>版權聲明: </span><span class="post-copyright-info">本部落格所有文章除特別聲明外，均採用<a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" rel="external nofollow noreferrer" target="_blank">CC BY-NC-SA 4.0</a> 授權協議。轉載請註明來源 <a href="https://luketsengtw.github.io" target="_blank">Yaoの程式小窩</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/%E7%A8%8B%E5%BC%8F%E8%AA%9E%E8%A8%80/">程式語言</a><a class="post-meta__tags" href="/tags/Lua/">Lua</a></div><div class="post-share"><div class="social-share" data-image="/img/lua_cover.png" data-sites="facebook, twitter"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload='this.media="all"'><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><a class="pagination-related" href="/posts/453d0377" title="【Lua 筆記】作用域 / 函數 - part 7"><img class="cover" src="/img/lua_cover.png" onerror='onerror=null,src="/img/404.jpg"' alt="cover of previous post"><div class="info"><div class="info-1"><div class="info-item-1">上一篇</div><div class="info-item-2">【Lua 筆記】作用域 / 函數 - part 7</div></div><div class="info-2"><div class="info-item-1">【Lua 筆記】作用域 / 函數 - part 7由於有款遊戲叫做 CSO（Counter-Strike Online），內建模式創世者模式（Studio）新增使用 Lua 及其遊戲的 API，所以突發奇想製作這個筆記。 這個筆記會在一開始先著重純粹的程式設計自學，在最後的章節才會與 CSO 遊戲 API 進行應用。 作用域（scope）作用域（scope），表示一個變數或函數等能夠作用的範圍，什麼意思呢？請看以下例子： 12a = 10 -- 這是全域變數local a = 50 -- 這是局域變數 lua 當中的變數，沒有在前面加上 local 以外，全部都是「全域變數」，你可以把全域變數想像成是一個到哪裡都可以用的變數。 局域變數就只限縮於”目前”的範圍，什麼意思呢？也就是在變數前面宣告了 local 這個關鍵字，就只有這整個文件可以用這個變數而已，其他的文件不能存取到它的值。（這只是粗淺的解釋，實際上看的是他目前所在的作用域範圍） 具體是何種”目前”的範圍，我們在說明函數的時候稍待說明一下。 函數（function）函數（function），又被稱為副程式、函式，我們在之...</div></div></div></a><a class="pagination-related" href="/posts/a646f474" title="【Lua 筆記】表（table） - part 9"><img class="cover" src="/img/lua_cover.png" onerror='onerror=null,src="/img/404.jpg"' alt="cover of next post"><div class="info text-right"><div class="info-1"><div class="info-item-1">下一篇</div><div class="info-item-2">【Lua 筆記】表（table） - part 9</div></div><div class="info-2"><div class="info-item-1">【Lua 筆記】表（table） - part 9由於有款遊戲叫做 CSO（Counter-Strike Online），內建模式創世者模式（Studio）新增使用 Lua 及其遊戲的 API，所以突發奇想製作這個筆記。 這個筆記會在一開始先著重純粹的程式設計自學，在最後的章節才會與 CSO 遊戲 API 進行應用。 表（Table）Lua 中的表（table）是一種很強很好用的資料結構，主要有以下幾個特點： Dynamic：table 可以動態地新增或刪除項目（item），無需事先宣告 table 的大小。這讓 table 非常靈活，可以用於各種資料結構，如陣列、字典等。 Key / Value（鍵值對）：table 中的資料是以鍵值對的形式進行儲存的。鍵（key）可以是任意型態的值（除了 nil），包括數字、字串或者 table 本身等。值（value）也可以是任意型態的。 Difference：表中可以同時儲存不同型態的值，表示在同一個 table 中可以同時有整數、字串、函數等不同型態的資料。 Index：Lua 中的 table 索引（index）可以是整數或者字串，...</div></div></div></a></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>相關推薦</span></div><div class="relatedPosts-list"><a class="pagination-related" href="/posts/bb4e680f" title="【Lua 筆記】物件導向程式設計（Object Oriented Programming，OOP） - part 11"><img class="cover" src="/img/lua_cover.png" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2024-07-01</div><div class="info-item-2">【Lua 筆記】物件導向程式設計（Object Oriented Programming，OOP） - part 11</div></div><div class="info-2"><div class="info-item-1">【Lua 筆記】物件導向程式設計（Object Oriented Programming，OOP） - part 11由於有款遊戲叫做 CSO（Counter-Strike Online），內建模式創世者模式（Studio）新增使用 Lua 及其遊戲的 API，所以突發奇想製作這個筆記。 這個筆記會在一開始先著重純粹的程式設計自學，在最後的章節才會與 CSO 遊戲 API 進行應用。 小提醒：此為本筆記最後一章，恭喜你可以準備結合CSO的API實作了。 物件導向程式設計（Object Oriented Programming，OOP）物件導向程式設計（Object-Oriented Programming, OOP）是一種程式設計範式，強調使用「物件」來設計軟體和程式碼。物件是具有狀態（屬性）和行為（方法）的實體。OOP 的主要目的是提高程式碼的可重用性、可維護性和可擴展性。 舉個例子：比如我現在正在 coding，用物件導向程式設計的邏輯來看的話，就是如以下表格所示（參考自：何謂物件導向程式設計 - HackMD）： 類別（class） 物件名稱（name） 物件屬性（...</div></div></div></a><a class="pagination-related" href="/posts/6d37a3dd" title="【Lua 筆記】陣列 - part 5"><img class="cover" src="/img/lua_cover.png" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2024-06-23</div><div class="info-item-2">【Lua 筆記】陣列 - part 5</div></div><div class="info-2"><div class="info-item-1">【Lua 筆記】陣列 - part 5由於有款遊戲叫做 CSO（Counter-Strike Online），內建模式創世者模式（Studio）新增使用 Lua 及其遊戲的 API，所以突發奇想製作這個筆記。 這個筆記會在一開始先著重純粹的程式設計自學，在最後的章節才會與 CSO 遊戲 API 進行應用。 陣列（Array）我們先來看看 Lua 的陣列長怎樣： 1myArray = &#123;10, 20, 30, 40, 50&#125; 陣列（Array），用兩個大括號 &#123;&#125; 將資料圍起來，在 Lua 當中並沒有給它特定的資料型態，而是被一個稱為 table（表）的資料型態所包圍起來。 所以 type(myArray) 輸出結果會是 table： 12myArray = &#123;10, 20, 30, 40, 50&#125;print(type(myArray)) --&gt; table :::danger切記：Lua 的陣列索引從 1 開始。也可以自定義從 0 開始，等下會說怎麼做。::: 回歸到問題本身，各位可能仍然還會疑惑的一點是，陣列到底...</div></div></div></a><a class="pagination-related" href="/posts/29d430c4" title="【Lua 筆記】簡介 &#x2F; 基本語法及資料型態 &#x2F; 變數 - part 1"><img class="cover" src="/img/lua_cover.png" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2024-06-15</div><div class="info-item-2">【Lua 筆記】簡介 &#x2F; 基本語法及資料型態 &#x2F; 變數 - part 1</div></div><div class="info-2"><div class="info-item-1">【Lua 筆記】簡介 / 基本語法及資料型態 / 變數 - part 1由於有款遊戲叫做 CSO（Counter-Strike Online），內建模式創世者模式（Studio）新增使用 Lua 及其遊戲的 API，所以突發奇想製作這個筆記。 這個筆記會在一開始先著重純粹的程式設計自學，在最後的章節才會與 CSO 遊戲 API 進行應用。 簡介（Introduction） Lua（葡萄牙語「月亮」）是一個簡潔、輕量、可擴充的手稿語言。Lua有著相對簡單的C語言API而很容易嵌入應用中。很多應用程式使用Lua作為自己的嵌入式手稿語言，以此來實現可組態性、可擴充性。 - Wekipedia Lua 建立日期：1993年。by 羅伯托·耶魯薩林斯希、Luiz Henrique de Figueiredo、Waldemar Celes 特性： Lua 是一種輕量語言，它的官方版本只包括一個精簡的核心和最基本的函式庫。這使得Lua體積小、啟動速度快。它用 ANSI C 語言編寫，並以原始碼形式開放，編譯後的完整參考直譯器只有大約247kB，到5.4.3版本，該體積變成 283kB（Li...</div></div></div></a><a class="pagination-related" href="/posts/1a93cb3f" title="【Lua 筆記】條件控制 - part 3"><img class="cover" src="/img/lua_cover.png" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2024-06-15</div><div class="info-item-2">【Lua 筆記】條件控制 - part 3</div></div><div class="info-2"><div class="info-item-1">【Lua 筆記】條件控制 - part 3由於有款遊戲叫做 CSO（Counter-Strike Online），內建模式創世者模式（Studio）新增使用 Lua 及其遊戲的 API，所以突發奇想製作這個筆記。 這個筆記會在一開始先著重純粹的程式設計自學，在最後的章節才會與 CSO 遊戲 API 進行應用。 條件控制（Condition）條件控制，大多程式語言所用到的關鍵字為「if」。 if 就是如果的意思，為什麼要用到條件控制呢？舉個例子：”如果”今天下雨，那麼我就帶雨傘。 那”如果”今天不下雨，”否則”我就不帶雨傘。 如果是關鍵字，否則同屬之。-&gt; if、else 關鍵字 從上面例子可以看出來，”如果”今天下雨這個條件不成立，也就是今天不下雨，則會觸發”否則”這個條件。 在進入正式的語法之前，先來個重要的觀念： 控制結構的條件式結果可以是任何值，Lua 認為 false 和 nil 為假，true 和非 nil 為真（非常重要！！！！）。要注意的是 Lua 中 0 為 true： 1234--[ 0 為 true ]if (0) then print(&qu...</div></div></div></a><a class="pagination-related" href="/posts/9793b663" title="【Lua 筆記】迴圈 - part 4"><img class="cover" src="/img/lua_cover.png" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2024-06-15</div><div class="info-item-2">【Lua 筆記】迴圈 - part 4</div></div><div class="info-2"><div class="info-item-1">【Lua 筆記】迴圈 - part 4由於有款遊戲叫做 CSO（Counter-Strike Online），內建模式創世者模式（Studio）新增使用 Lua 及其遊戲的 API，所以突發奇想製作這個筆記。 這個筆記會在一開始先著重純粹的程式設計自學，在最後的章節才會與 CSO 遊戲 API 進行應用。 迴圈（loop）迴圈即一個循環。 很多時候我們會需要重複執行一個動作，以生活舉例，像是平時上廁所（無論小便、大便）會是一個迴圈，因為這是我們不斷持續在做的事情。又或者是在長跑時，跑了好幾圈操場，這也是一種迴圈。 回到正題，Lua 共支援以下幾種迴圈語法： while for repeat…until break goto while、for 一定是每個程式語言基本配備，接下來讓我們先來看看 while 迴圈： while 迴圈while 是一種具有條件判斷的迴圈，格式如下： 123while (condition) do statementsend 當 condition 這個條件成立，也就是 condition = true 的時候，迴圈才會執行。 至於執行什麼內容呢...</div></div></div></a><a class="pagination-related" href="/posts/e070f4bc" title="【Lua 筆記】延伸 for 迴圈 - part 6"><img class="cover" src="/img/lua_cover.png" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2024-06-23</div><div class="info-item-2">【Lua 筆記】延伸 for 迴圈 - part 6</div></div><div class="info-2"><div class="info-item-1">【Lua 筆記】延伸 for 迴圈 - part 6由於有款遊戲叫做 CSO（Counter-Strike Online），內建模式創世者模式（Studio）新增使用 Lua 及其遊戲的 API，所以突發奇想製作這個筆記。 這個筆記會在一開始先著重純粹的程式設計自學，在最後的章節才會與 CSO 遊戲 API 進行應用。 for in 迴圈for 迴圈分為兩類： for do 迴圈 for in do 迴圈 之前我們說的 for 都是 for do 迴圈。 今天來談 for in do 這個迴圈，它主要是用來迭代陣列或表的。可以分別用 ipairs、pairs 進行處理。 迭代陣列值範例來源：【30天Lua重拾筆記13】基礎2: 控制-for迴圈 - iT 邦幫忙::一起幫忙解決難題，拯救 IT 人的一天 12345array = &#123;&quot;one&quot;, &quot;two&quot;, &quot;three&quot;&#125;for i, v in ipairs(array) do print(i, v)end 輸出結果： 1231 one2...</div></div></div></a></div></div><hr class="custom-hr"><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> 評論</span></div></div><div class="comment-wrap"><div><div id="waline-wrap"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info text-center"><div class="avatar-img"><img src="/img/avatar.jpg" onerror='this.onerror=null,this.src="/img/friend_404.gif"' alt="avatar"></div><div class="author-info-name">LukeTseng</div><div class="author-info-description">一個軟硬體都愛的資訊人，也是個無名的程式熱愛者。目前仍主要活躍於 Hackmd 平台上，基本上本站與此同步更新。</div><div class="site-data"><a href="/archives/"><div class="headline">文章</div><div class="length-num">147</div></a><a href="/tags/"><div class="headline">標籤</div><div class="length-num">48</div></a><a href="/categories/"><div class="headline">分類</div><div class="length-num">19</div></a></div><a id="card-info-btn" target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/LukeTsengTW"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons"><a class="social-icon" href="https://github.com/LukeTsengTW" rel="external nofollow noreferrer" target="_blank" title="Github"><i class="fab fa-github" style="color:#hdhfbb"></i></a><a class="social-icon" href="https://hackmd.io/@LukeTseng" rel="external nofollow noreferrer" target="_blank" title="Hackmd"><i class="fas fa-file-lines" style="color:#4e44fe"></i></a><a class="social-icon" href="https://www.instagram.com/moonouo_" rel="external nofollow noreferrer" target="_blank" title="Instagram"><i class="fab fa-square-instagram" style="color:#dd2a7b"></i></a></div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目錄</span><span class="toc-percentage"></span></div><div class="toc-content is-expand"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E3%80%90Lua-%E7%AD%86%E8%A8%98%E3%80%91%E5%AD%97%E4%B8%B2%EF%BC%88String%EF%BC%89-part-8"><span class="toc-number">1.</span> <span class="toc-text">【Lua 筆記】字串（String） - part 8</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%AD%97%E4%B8%B2%EF%BC%88String%EF%BC%89"><span class="toc-number">2.</span> <span class="toc-text">字串（String）</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8F%96%E5%BE%97%E5%AD%97%E4%B8%B2%E9%95%B7%E5%BA%A6%E7%9A%84%E5%8F%A6%E4%B8%80%E7%A8%AE%E6%96%B9%E5%BC%8F"><span class="toc-number">2.1.</span> <span class="toc-text">取得字串長度的另一種方式</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%B7%B3%E8%84%AB%E5%AD%97%E5%85%83%EF%BC%88Escape-Character%EF%BC%89"><span class="toc-number">2.2.</span> <span class="toc-text">跳脫字元（Escape Character）</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#string-%E7%9A%84%E6%96%B9%E6%B3%95%EF%BC%88Method%EF%BC%89"><span class="toc-number">2.3.</span> <span class="toc-text">string 的方法（Method）</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AD%97%E4%B8%B2%E6%A0%BC%E5%BC%8F%E5%8C%96%EF%BC%88String-Formating%EF%BC%89"><span class="toc-number">2.4.</span> <span class="toc-text">字串格式化（String-Formating）</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AD%97%E4%B8%B2%E5%8C%B9%E9%85%8D%E6%A8%A1%E5%BC%8F"><span class="toc-number">2.5.</span> <span class="toc-text">字串匹配模式</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%B8%BD%E7%B5%90"><span class="toc-number">3.</span> <span class="toc-text">總結</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%8F%83%E8%80%83%E8%B3%87%E6%96%99"><span class="toc-number">4.</span> <span class="toc-text">參考資料</span></a></li></ol></div></div><div class="card-widget card-post-series"><div class="item-headline"><i class="fa-solid fa-layer-group"></i><span>Lua 系列文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/posts/82615521" title="【Lua 筆記】數學函式庫 - 番外"><img src="/img/lua_cover.png" onerror='this.onerror=null,this.src="/img/404.jpg"' alt="【Lua 筆記】數學函式庫 - 番外"></a><div class="content"><a class="title" href="/posts/82615521" title="【Lua 筆記】數學函式庫 - 番外">【Lua 筆記】數學函式庫 - 番外</a><time datetime="2024-07-02T08:04:02.000Z" title="發表於 2024-07-02 16:04:02">2024-07-02</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/bb4e680f" title="【Lua 筆記】物件導向程式設計（Object Oriented Programming，OOP） - part 11"><img src="/img/lua_cover.png" onerror='this.onerror=null,this.src="/img/404.jpg"' alt="【Lua 筆記】物件導向程式設計（Object Oriented Programming，OOP） - part 11"></a><div class="content"><a class="title" href="/posts/bb4e680f" title="【Lua 筆記】物件導向程式設計（Object Oriented Programming，OOP） - part 11">【Lua 筆記】物件導向程式設計（Object Oriented Programming，OOP） - part 11</a><time datetime="2024-07-01T07:37:35.000Z" title="發表於 2024-07-01 15:37:35">2024-07-01</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/7d9ac874" title="【Lua 筆記】元表（MetaTable） - part 10"><img src="/img/lua_cover.png" onerror='this.onerror=null,this.src="/img/404.jpg"' alt="【Lua 筆記】元表（MetaTable） - part 10"></a><div class="content"><a class="title" href="/posts/7d9ac874" title="【Lua 筆記】元表（MetaTable） - part 10">【Lua 筆記】元表（MetaTable） - part 10</a><time datetime="2024-06-30T06:00:15.000Z" title="發表於 2024-06-30 14:00:15">2024-06-30</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/a646f474" title="【Lua 筆記】表（table） - part 9"><img src="/img/lua_cover.png" onerror='this.onerror=null,this.src="/img/404.jpg"' alt="【Lua 筆記】表（table） - part 9"></a><div class="content"><a class="title" href="/posts/a646f474" title="【Lua 筆記】表（table） - part 9">【Lua 筆記】表（table） - part 9</a><time datetime="2024-06-29T14:20:31.000Z" title="發表於 2024-06-29 22:20:31">2024-06-29</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/ca9a09b" title="【Lua 筆記】字串（String） - part 8"><img src="/img/lua_cover.png" onerror='this.onerror=null,this.src="/img/404.jpg"' alt="【Lua 筆記】字串（String） - part 8"></a><div class="content"><a class="title" href="/posts/ca9a09b" title="【Lua 筆記】字串（String） - part 8">【Lua 筆記】字串（String） - part 8</a><time datetime="2024-06-24T11:15:48.000Z" title="發表於 2024-06-24 19:15:48">2024-06-24</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/453d0377" title="【Lua 筆記】作用域 / 函數 - part 7"><img src="/img/lua_cover.png" onerror='this.onerror=null,this.src="/img/404.jpg"' alt="【Lua 筆記】作用域 / 函數 - part 7"></a><div class="content"><a class="title" href="/posts/453d0377" title="【Lua 筆記】作用域 / 函數 - part 7">【Lua 筆記】作用域 / 函數 - part 7</a><time datetime="2024-06-23T16:39:58.000Z" title="發表於 2024-06-24 00:39:58">2024-06-24</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/e070f4bc" title="【Lua 筆記】延伸 for 迴圈 - part 6"><img src="/img/lua_cover.png" onerror='this.onerror=null,this.src="/img/404.jpg"' alt="【Lua 筆記】延伸 for 迴圈 - part 6"></a><div class="content"><a class="title" href="/posts/e070f4bc" title="【Lua 筆記】延伸 for 迴圈 - part 6">【Lua 筆記】延伸 for 迴圈 - part 6</a><time datetime="2024-06-23T07:02:21.000Z" title="發表於 2024-06-23 15:02:21">2024-06-23</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/6d37a3dd" title="【Lua 筆記】陣列 - part 5"><img src="/img/lua_cover.png" onerror='this.onerror=null,this.src="/img/404.jpg"' alt="【Lua 筆記】陣列 - part 5"></a><div class="content"><a class="title" href="/posts/6d37a3dd" title="【Lua 筆記】陣列 - part 5">【Lua 筆記】陣列 - part 5</a><time datetime="2024-06-22T16:00:28.000Z" title="發表於 2024-06-23 00:00:28">2024-06-23</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/9793b663" title="【Lua 筆記】迴圈 - part 4"><img src="/img/lua_cover.png" onerror='this.onerror=null,this.src="/img/404.jpg"' alt="【Lua 筆記】迴圈 - part 4"></a><div class="content"><a class="title" href="/posts/9793b663" title="【Lua 筆記】迴圈 - part 4">【Lua 筆記】迴圈 - part 4</a><time datetime="2024-06-15T12:45:05.000Z" title="發表於 2024-06-15 20:45:05">2024-06-15</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/1a93cb3f" title="【Lua 筆記】條件控制 - part 3"><img src="/img/lua_cover.png" onerror='this.onerror=null,this.src="/img/404.jpg"' alt="【Lua 筆記】條件控制 - part 3"></a><div class="content"><a class="title" href="/posts/1a93cb3f" title="【Lua 筆記】條件控制 - part 3">【Lua 筆記】條件控制 - part 3</a><time datetime="2024-06-15T10:33:36.000Z" title="發表於 2024-06-15 18:33:36">2024-06-15</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/309a1c3e" title="【Lua 筆記】運算子 - part 2"><img src="/img/lua_cover.png" onerror='this.onerror=null,this.src="/img/404.jpg"' alt="【Lua 筆記】運算子 - part 2"></a><div class="content"><a class="title" href="/posts/309a1c3e" title="【Lua 筆記】運算子 - part 2">【Lua 筆記】運算子 - part 2</a><time datetime="2024-06-15T09:10:50.000Z" title="發表於 2024-06-15 17:10:50">2024-06-15</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/29d430c4" title="【Lua 筆記】簡介 / 基本語法及資料型態 / 變數 - part 1"><img src="/img/lua_cover.png" onerror='this.onerror=null,this.src="/img/404.jpg"' alt="【Lua 筆記】簡介 / 基本語法及資料型態 / 變數 - part 1"></a><div class="content"><a class="title" href="/posts/29d430c4" title="【Lua 筆記】簡介 / 基本語法及資料型態 / 變數 - part 1">【Lua 筆記】簡介 / 基本語法及資料型態 / 變數 - part 1</a><time datetime="2024-06-15T07:32:39.000Z" title="發表於 2024-06-15 15:32:39">2024-06-15</time></div></div></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/posts/503ce7e6" title="基礎邏輯電路（上）"><img src="/img/Computer_Science_Word_Cloud.png" onerror='this.onerror=null,this.src="/img/404.jpg"' alt="基礎邏輯電路（上）"></a><div class="content"><a class="title" href="/posts/503ce7e6" title="基礎邏輯電路（上）">基礎邏輯電路（上）</a><time datetime="2025-10-12T12:13:56.000Z" title="發表於 2025-10-12 20:13:56">2025-10-12</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/3e674b2a" title="【Python 筆記】正規運算式（Regular Expression）"><img src="/img/python_cover.png" onerror='this.onerror=null,this.src="/img/404.jpg"' alt="【Python 筆記】正規運算式（Regular Expression）"></a><div class="content"><a class="title" href="/posts/3e674b2a" title="【Python 筆記】正規運算式（Regular Expression）">【Python 筆記】正規運算式（Regular Expression）</a><time datetime="2025-10-12T05:23:04.000Z" title="發表於 2025-10-12 13:23:04">2025-10-12</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/98e754e8" title="什麼是奇偶校驗？（Parity Bit）"><img src="/img/Computer_Science_Word_Cloud.png" onerror='this.onerror=null,this.src="/img/404.jpg"' alt="什麼是奇偶校驗？（Parity Bit）"></a><div class="content"><a class="title" href="/posts/98e754e8" title="什麼是奇偶校驗？（Parity Bit）">什麼是奇偶校驗？（Parity Bit）</a><time datetime="2025-10-11T10:45:27.000Z" title="發表於 2025-10-11 18:45:27">2025-10-11</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/abb4b4dc" title="Excess Notation 與儲存實數（含浮點數）的方法"><img src="/img/Computer_Science_Word_Cloud.png" onerror='this.onerror=null,this.src="/img/404.jpg"' alt="Excess Notation 與儲存實數（含浮點數）的方法"></a><div class="content"><a class="title" href="/posts/abb4b4dc" title="Excess Notation 與儲存實數（含浮點數）的方法">Excess Notation 與儲存實數（含浮點數）的方法</a><time datetime="2025-10-08T13:34:46.000Z" title="發表於 2025-10-08 21:34:46">2025-10-08</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/8712bb37" title="【Uva 題庫解題】C++ 個人解題筆記 - part4"><img src="/img/uva_cover.jpg" onerror='this.onerror=null,this.src="/img/404.jpg"' alt="【Uva 題庫解題】C++ 個人解題筆記 - part4"></a><div class="content"><a class="title" href="/posts/8712bb37" title="【Uva 題庫解題】C++ 個人解題筆記 - part4">【Uva 題庫解題】C++ 個人解題筆記 - part4</a><time datetime="2025-10-05T13:03:04.000Z" title="發表於 2025-10-05 21:03:04">2025-10-05</time></div></div></div></div></div></div></main><footer id="footer" style="background-image:url(/img/lua_cover.png)"><div class="footer-other"><div class="footer-copyright"><span class="copyright">&copy;&nbsp;2024 - 2025 By LukeTseng</span><span class="framework-info"><span>框架 </span><a target="_blank" rel="noopener external nofollow noreferrer" href="https://hexo.io">Hexo 7.3.0</a><span class="footer-separator">|</span><span>主題 </span><a target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly 5.4.3</a></span></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="閱讀模式"><i class="fas fa-book-open"></i></button><button id="translateLink" type="button" title="繁簡轉換">繁</button><button id="darkmode" type="button" title="日夜模式切換"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="單欄和雙欄切換"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="設定"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目錄"><i class="fas fa-list-ul"></i></button><a id="to_comment" href="#post-comment" title="前往評論"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="回到頂端"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox/fancybox.umd.min.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page/instantpage.min.js" type="module"></script><script src="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.js"></script><div class="js-pjax"><script>(()=>{const t=()=>{if(window.MathJax)MathJax.startup.document.state(0),MathJax.texReset(),MathJax.typesetPromise();else{window.MathJax={tex:{inlineMath:[["$","$"],["\\(","\\)"]],tags:"none"},chtml:{scale:1.1},options:{enableMenu:!0,renderActions:{findScript:[10,t=>{for(const e of document.querySelectorAll('script[type^="math/tex"]')){const n=!!e.type.match(/; *mode=display/),a=new t.options.MathItem(e.textContent,t.inputJax[0],n),d=document.createTextNode("");e.parentNode.replaceChild(d,e),a.start={node:d,delim:"",n:0},a.end={node:d,delim:"",n:0},t.math.push(a)}},""]}}};const t=document.createElement("script");t.src="https://cdn.jsdelivr.net/npm/mathjax/es5/tex-mml-chtml.min.js",t.id="MathJax-script",t.async=!0,document.head.appendChild(t)}};btf.addGlobalFn("encrypt",t,"mathjax"),window.pjax?t():window.addEventListener("load",t)})()</script><script>(()=>{let e=window.walineFn||null;const n="shuoshuo"===GLOBAL_CONFIG_SITE.pageType,t={lang:"zh-TW",locale:{seconds:"秒前",minutes:"分鐘前",hours:"小時前",days:"天前",now:"剛剛",gif:"表情包",gifSearchPlaceholder:"搜尋 gif 動圖",comment:"留言",placeholder:"歡迎留言，請務必友善發言，減少衝突，讓世界更美好～"},emoji:["https://unpkg.com/@waline/emojis@1.0.1/tw-emoji"]},i=(e,i=document,o=window.location.pathname)=>{const s=e({el:i.querySelector("#waline-wrap"),serverURL:"https://discussion-kohl.vercel.app/",pageview:!0,dark:'html[data-theme="dark"]',comment:!0,...t,path:n?o:t&&t.path||o});n&&(window.shuoshuoComment.destroyWaline=()=>{s.destroy(),i.children.length&&(i.innerHTML="",i.classList.add("no-comment"))})},o=(n,t)=>{e?i(e,n,t):btf.getCSS("https://cdn.jsdelivr.net/npm/@waline/client/dist/waline.min.css").then(()=>import("https://cdn.jsdelivr.net/npm/@waline/client/dist/waline.min.js")).then(({init:o})=>{e=o||Waline.init,i(e,n,t),window.walineFn=e})};n?window.shuoshuoComment={loadComment:o}:setTimeout(o,0)})()</script></div><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/activate-power-mode.min.js"></script><script>POWERMODE.colorful=!0,POWERMODE.shake=!0,POWERMODE.mobile=!1,document.body.addEventListener("input",POWERMODE)</script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><div id="algolia-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜尋</span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="search-wrap"><div id="algolia-search-input"></div><hr><div id="algolia-search-results"><div id="algolia-hits"></div><div id="algolia-pagination"></div><div id="algolia-info"><div class="algolia-stats"></div><div class="algolia-poweredBy"></div></div></div></div></div><div id="search-mask"></div><script src="https://cdn.jsdelivr.net/npm/algoliasearch/dist/lite/builds/browser.umd.min.js"></script><script src="https://cdn.jsdelivr.net/npm/instantsearch.js/dist/instantsearch.production.min.js"></script><script src="/js/search/algolia.js"></script></div><noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-5BKRW8SL" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript></div></body></html>